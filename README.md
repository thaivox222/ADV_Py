# Решение ДЗ по курсу ITtensive - Продвинутый Python

## ДЗ № 1 (Модуль 2)
На примере этого датасета:
video.ittensive.com/python-advanced/data-9753-2019-07-25.utf.csv
Сгруппируйте данные по годам, если в году меньше 6 значений, отбросьте эти годы.
Постройте модель линейной регрессии по годам среднего значения отношения UnemployedDisabled к UnemployedTotal (процента людей с ограниченными возможностями) за месяц и ответьте, какое ожидается значение процента безработных инвалидов в 2020 году при сохранении текущей политики города Москвы?
Ответ округлите до сотых и скопируйте в поле Отчет. Например, 2,32
### Ход решения:
После подключение библиотек и датасета делаем группировку по году и тут же фильтруем через lambda-функцию:

```
data = data.groupby("Year").filter(lambda x: x["Year"].count() >= 6)
```
Затем применяем следующие действия
- считаем среднее значение по годам
- решейпим массив из одномерного в двумерный (см.комментарий в самом листинге)
- строим саму модель линейной регресии с помощью sklearn
- загружаем в массив +1 элемент для 2020 года, снова решейпим модель
- выводим график с помощью matplotlib 



## ДЗ № 2 (Модуль 3)
Соберите данные о моделях холодильников Саратов с маркетплейса beru.ru: URL, название, цена, размеры, общий объем, объем холодильной камеры. Создайте соответствующие таблицы в SQLite базе данных и загрузите полученные данные в таблицу beru_goods.
В поле отчет скопируйте содержимое таблицы beru_goods (результат SELECT запроса или фрейма pandas).
Для парсинга можно использовать зеркало страницы поиска beru.ru с холодильниками Саратов по адресу:
https://video.ittensive.com/data/018-python-advanced/beru.ru/
### Ход решения
Все решение можно разбить на несколько блоков
 - сначала пишем функцию, которая будет вытягивать все урлы, содержащие строку "kholodilnik-saratov" на странице и складирующую их в список holod
 - на втором этапе мы делаем склейку домен+урл и так получаем уже готовую ссылку. Затем мы парсим каждую ссылку и собираем со странички все нужные нам данные
 - все спарсенные данные вместе с урлами складируем в CSV-файл
 - далее подключаем pandas и загоняем данные из CSV в датафрейм
 - на основе структуры датафрема создаем в базе данных табличку с такой же структурой
 - построчно обходим весь датафрейм и заносим каждую строчку в таблицу
 - дальше уже выводим результат.
 
 В исходном файле есть бага, из-за которой вместо значения тега размера камеры для Саратова 550 выводится вид системы разморозки.
 Здесь не надо пытаться как-то найти условие для парсинга именно этого элемента. Просто найдите этот тег в html-коде через поиск
 и сделайте апдейт датафрейма вручную (ДО того, как загружать в базу данных!)
 И еще один момент - значения объема камер надо вырезать из строки. В уроках к модулю есть пример, как это делает автор (фукция isdigit+условный оператор)
 

## ДЗ № 3 (Модуль 4)
Изучите набор данных по объектам культурного наследия России (в виде gz-архива):
https://video.ittensive.com/python-advanced/data-44-structure-4.csv.gz
и постройте фоновую картограмму по количеству объектов в каждом регионе России, используя гео-данные
https://video.ittensive.com/python-advanced/russia.json.gz
Выведите для каждого региона количество объектов в нем.
### Ход решения:
Итак, у нас два датафрейма. Самое первое - надо определить, как их склеить междук собой.
Метод по номеру региона не подходит - он есть только в одном из них.
Единственное, что эти датафреймы объединяет - это названия регионов. Но они написаны в разных регистрах.
Решение - привести оба названия в одному регистру.Я выбрал нижний регистр.
После этого можно делать склейку через мердж.
Здесь есть один нюанс. В примерах из к модуля склейка идет так: к первому дф цепляется второй.
В задании дф нужно поменять местами - левым дф должен быть тот, что с гео координатами и к нему уже цеплять второй.
Ну а после склейки можно выводить и сам график.
У автора решение более элегантное. 
Он не стал выводить легенду в график и увеличил карту РФ.
Я на момент решения не знал как это делать (


## ДЗ № 4 (Модуль 5)
Соберите отчет по результатам ЕГЭ в 2018-2019 году, используя данные
https://video.ittensive.com/python-advanced/data-9722-2019-10-14.utf.csv
и отправьте его в HTML формате по адресу support@ittensive.com, используя только Python. 
В отчете должно быть:
- общее число отличников (учеников, получивших более 220 баллов по ЕГЭ в Москве),
- распределение отличников по округам Москвы,
- название школы с лучшими результатами по ЕГЭ в Москве.
- Диаграмма распределения должна быть вставлена в HTML через data:URI формат (в base64-кодировке).
- Дополнительно: приложите к отчету PDF документ того же содержания (дублирующий письмо).

### Ход решения:
Также решение задание можно разбить на несколько блоков.
Сначала надо построить диаграмму распределения. Делаем также, как в одном из уроков второго модуля.
Тип диаграммы выбираем круговая (или pie chart).
Затем нужно вывести текстовые данные (п.1-3 задания) и все это дело выгрузить в PDF.
Делаем так же как в уроках к модулю.
Третий этап - отправить письмо на почту саппорта курса.
Я отправлял с Яндекса. Перед этим надо создать индивидуальный пароль для нашего скрипта в самом сервисе Яндекса
и использовать этот пароль в коде.
Если отправляете через Гугл - то не забудьте в настройках аккаунта дать разрешение на доступ к отправке писем для небезопасных приложений.



